# 眼科医院管理系统API接口文档

## 文档说明

本文档记录眼科医院管理系统的所有API接口，按照功能模块分类。每个接口包含以下信息：
- 接口名称
- 接口URL
- 请求方式
- 权限要求
- 请求参数
- 返回结果
- 错误码说明
- 示例

## 目录

### 1. 用户认证模块
- [1.1 用户登录](#11-用户登录)
- [1.2 用户注册](#12-用户注册)
- [1.3 退出登录](#13-退出登录)
- [1.4 修改密码](#14-修改密码)

### 2. 患者模块
- [2.1 患者信息管理](#21-患者信息管理)
- [2.2 支付结算管理](#22-支付结算管理)
- [2.3 眼科就诊记录查询](#23-眼科就诊记录查询)
- [2.4 住院信息查询](#24-住院信息查询)
- [2.5 预约挂号管理](#25-预约挂号管理)

### 3. 医生模块
- [3.1 医生信息管理](#31-医生信息管理)
- [3.2 患者诊疗管理](#32-患者诊疗管理)
- [3.3 视光服务管理](#33-视光服务管理)
- [3.4 眼科手术管理](#34-眼科手术管理)
- [3.5 住院患者管理](#35-住院患者管理)

### 4. 管理员模块
- [4.1 系统用户管理](#41-系统用户管理)
- [4.2 医疗资源管理](#42-医疗资源管理)
- [4.3 眼科专项管理](#43-眼科专项管理)
- [4.4 药品耗材管理](#44-药品耗材管理)
- [4.5 财务管理](#45-财务管理)
- [4.6 系统安全管理](#46-系统安全管理)
- [4.7 数据统计与分析](#47-数据统计与分析)

## 1. 用户认证模块

### 1.1 用户登录

**接口描述**：用户登录系统

**请求URL**：`/api/auth/login`

**请求方式**：POST

**权限要求**：无

**请求参数**：

| 参数名 | 必选 | 类型 | 说明 |
|:----:|:---:|:----:|:----:|
| username | 是 | string | 用户名 |
| password | 是 | string | 密码 |

**返回示例**：

```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "userId": 1,
      "username": "zhangsan",
      "name": "张三",
      "roleType": "患者",
      "status": "启用"
    }
  }
}
```

**错误码说明**：

| 错误码 | 说明 |
|:----:|:----:|
| 400 | 参数错误 |
| 401 | 用户名或密码错误 |
| 403 | 账号已被禁用 |

### 1.2 用户注册

**接口描述**：新用户注册

**请求URL**：`/api/auth/register`

**请求方式**：POST

**权限要求**：无

**请求参数**：

| 参数名 | 必选 | 类型 | 说明 |
|:----:|:---:|:----:|:----:|
| username | 是 | string | 用户名 |
| password | 是 | string | 密码 |
| name | 是 | string | 姓名 |
| gender | 否 | string | 性别（男/女/其他） |
| phone | 否 | string | 手机号 |
| roleType | 是 | string | 角色类型（患者/医生/管理员） |
| idCard | 否 | string | 身份证号（患者必填） |
| birthDate | 否 | date | 出生日期（患者选填） |
| address | 否 | string | 地址（患者选填） |
| emergencyContact | 否 | string | 紧急联系人（患者选填） |
| emergencyPhone | 否 | string | 紧急联系电话（患者选填） |
| medicalHistory | 否 | string | 病史（患者选填） |
| allergyHistory | 否 | string | 过敏史（患者选填） |

**返回示例**：

```json
{
  "code": 200,
  "message": "注册成功",
  "data": {
    "userId": 1,
    "username": "zhangsan",
    "name": "张三",
    "roleType": "患者"
  }
}
```

**错误码说明**：

| 错误码 | 说明 |
|:----:|:----:|
| 400 | 参数错误 |
| 409 | 用户名已存在 |

## 2. 患者模块

### 2.1 患者信息管理

#### 2.1.1 获取患者信息

**接口描述**：获取患者个人信息

**请求URL**：`/api/patient/info`

**请求方式**：GET

**权限要求**：患者/医生/管理员

**请求参数**：

| 参数名 | 必选 | 类型 | 说明 |
|:----:|:---:|:----:|:----:|
| patientId | 否 | int | 患者ID（医生和管理员必填，患者不填则查询自己） |

**返回示例**：

```json
{
  "code": 200,
  "message": "获取成功",
  "data": {
    "patientId": 1,
    "userId": 1,
    "user": {
      "userId": 1,
      "username": "zhangsan",
      "name": "张三",
      "gender": "男",
      "phone": "13800138000",
      "roleType": "患者",
      "status": "启用",
      "createdAt": "2023-01-01 12:00:00"
    },
    "idCard": "110101199001011234",
    "birthDate": "1990-01-01",
    "address": "北京市朝阳区",
    "emergencyContact": "李四",
    "emergencyPhone": "13900139000",
    "medicalHistory": "无",
    "allergyHistory": "无",
    "createdAt": "2023-01-01 12:00:00"
  }
}
```

**错误码说明**：

| 错误码 | 说明 |
|:----:|:----:|
| 400 | 参数错误 |
| 401 | 未授权 |
| 403 | 权限不足 |
| 404 | 患者不存在 |

#### 2.1.2 更新患者信息

**接口描述**：更新患者个人信息

**请求URL**：`/api/patient/info`

**请求方式**：PUT

**权限要求**：患者/管理员

**请求参数**：

| 参数名 | 必选 | 类型 | 说明 |
|:----:|:---:|:----:|:----:|
| patientId | 否 | int | 患者ID（管理员必填，患者不填则更新自己） |
| name | 否 | string | 姓名 |
| gender | 否 | string | 性别 |
| phone | 否 | string | 手机号 |
| idCard | 否 | string | 身份证号 |
| birthDate | 否 | date | 出生日期 |
| address | 否 | string | 地址 |
| emergencyContact | 否 | string | 紧急联系人 |
| emergencyPhone | 否 | string | 紧急联系电话 |
| medicalHistory | 否 | string | 病史 |
| allergyHistory | 否 | string | 过敏史 |

**返回示例**：

```json
{
  "code": 200,
  "message": "更新成功",
  "data": null
}
```

**错误码说明**：

| 错误码 | 说明 |
|:----:|:----:|
| 400 | 参数错误 |
| 401 | 未授权 |
| 403 | 权限不足 |
| 404 | 患者不存在 |

## 模板说明

以上是API接口文档的基本模板和示例。在实现每个功能后，请按照以下步骤更新文档：

1. 在相应的模块下添加接口文档
2. 按照模板格式填写接口信息
3. 确保接口URL、请求方式、权限要求、请求参数和返回结果与实际实现一致
4. 提供详细的错误码说明和示例

每个接口文档应包含以下部分：
- 接口描述
- 请求URL
- 请求方式
- 权限要求
- 请求参数（表格形式）
- 返回示例（JSON格式）
- 错误码说明（表格形式）

随着功能的实现，逐步完善本文档。 